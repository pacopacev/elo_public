<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elopar BG Public Content</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="logo_light_test.png" sizes="32x32">
    <style>
        .dynamic-content {
            display: none;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            animation: fadeIn 0.3s ease;
        }
        .dynamic-content.active {
            display: block;
        }
        .back-button {
            display: inline-block;
            margin: 10px 0 20px 0;
            padding: 8px 16px;
            background: #6c757d;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            font-family: inherit;
            font-size: 16px;
        }
        .back-button:hover {
            background: #5a6268;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Допълнителни стилове за линковете */
        .content-link {
            cursor: pointer;
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }
        .content-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <script>
        fetch('./data.json')
    .then(response => response.json())
    .then(data => {
        // Access nested "data" property
        const cabinetData = data.data;
        
        // Set each cabinet text
        document.getElementById('cabinet0').textContent = cabinetData.cabinet0;
        // document.getElementById('cabinet1').textContent = cabinetData.cabinet1;
        // document.getElementById('cabinet2').textContent = cabinetData.cabinet2;
        // ... etc
        
       
    })
    .catch(error => console.error('Error:', error));
    </script>
    <header>
        <h3>ELOPAR BG - PUBLIC CONTENT</h3>
        <p>Technical documentation and wiring diagrams listed below:</p>
    </header>
    
    <main>

        
        <section id="main-list" style="line-height: 1.6 !important;">
            <ul>
                <li><a id="cabinet0" href="#" class="content-link" data-content="cabinet0"></a></li>
                <li><a style="color: red;" href="#" class="content-link" data-content="cabinet1">Electrical Panel - Injection Molding - Cabinet 1/Under Construction/</a></li>
                <li><a href="#" class="content-link" data-content="cabinet2">Electrical Panel - Injection Molding - Cabinet 2</a></li>
                <li><a style="color: red;"href="#" class="content-link" data-content="cabinet3">Electrical Panel - Injection Molding - Trimming/Under Construction/</a></li>
                <li><a style="color: red;" href="#" class="content-link" data-content="cabinet4">Electrical Panel - Injection Molding - Wherehouse/Under Construction/</a></li>
            </ul>
        </section>
        
        <!-- Dynamic Content Areas -->
        <div id="cabinet0-content" class="dynamic-content">
            <button class="back-button">← Back to List</button>
            <h2>Electrical Panel - Injection Molding - Office</h2>
            <p><strong>Type:</strong>  </p>
            <p><strong>Location:</strong> Office</p>
            <p><strong>Last Updated:</strong> <span class="content-date">January 2024</span></p>
            
            <div class="pdf-container">
                <iframe src="public_wiring/wiring_injection_molding_office.pdf" width="100%" height="500px" 
                        title="Injection Molding Office Wiring Diagram"></iframe>
            </div>
            
            <div class="actions">
                <a href="public_wiring/wiring_injection_molding_office.pdf" download class="download-link">Download PDF</a>
                <a href="public_wiring/wiring_injection_molding_office.pdf" target="_blank" class="download-link">Open in New Tab</a>
            </div>
        </div>

        <div id="cabinet1-content" class="dynamic-content">
            <button class="back-button">← Back to List</button>
            <h2>Electrical Panel - Injection Molding - Cabinet 1</h2>
            <p><strong>Type:</strong>   </p>
            <p><strong>Location:</strong> Production Hall</p>
            <p><strong>Last Updated:</strong> <span class="content-date"></span></p>
            
            <div class="pdf-container">
                <iframe src="" width="100%" height="500px" 
                        title="Cabinet 1 Wiring Diagram"></iframe>
            </div>
            
            <div class="actions">
                <a href="" download class="download-link">Download PDF</a>
                <a href="" target="_blank" class="download-link">Open in New Tab</a>
            </div>
        </div>

        <div id="cabinet2-content" class="dynamic-content">
            <button class="back-button">← Back to List</button>
            <h2>Electrical Panel - Injection Molding - Cabinet 2</h2>
            <p><strong>Type:</strong>      </p>
            <p><strong>Location:</strong> Production Hall</p>
            <p><strong>Last Updated:</strong> <span class="content-date">January 2024</span></p>
            
            <div class="pdf-container">
                <iframe src="public_wiring/wiring_injection_molding_cabinet_2.pdf" width="100%" height="500px" 
                        title="Cabinet 2 Wiring Diagram"></iframe>
            </div>
            
            <div class="actions">
                <a href="public_wiring/wiring_injection_molding_cabinet_2.pdf" download class="download-link">Download PDF</a>
                <a href="public_wiring/wiring_injection_molding_cabinet_2.pdf" target="_blank" class="download-link">Open in New Tab</a>
            </div>
        </div>

        <div id="cabinet3-content" class="dynamic-content">
            <button class="back-button">← Back to List</button>
            <h2>Electrical Panel - Injection Molding - Trimming</h2>
            <p><strong>Type:</strong>      </p>
            <p><strong>Location:</strong> Trimming</p>
            <p><strong>Last Updated:</strong> <span class="content-date">January 2024</span></p>
            
            <div class="pdf-container">
                <iframe src="" width="100%" height="500px" 
                        title="Cabinet 2 Wiring Diagram"></iframe>
            </div>
            
            <div class="actions">
                <a href="" download class="download-link">Download PDF</a>
                <a href="" target="_blank" class="download-link">Open in New Tab</a>
            </div>
        </div>

        <div id="cabinet4-content" class="dynamic-content">
            <button class="back-button">← Back to List</button>
            <h2>Electrical Panel - Injection Molding - Wherehouse</h2>
            <p><strong>Type:</strong>      </p>
            <p><strong>Location:</strong> Wherehouse</p>
            <p><strong>Last Updated:</strong> <span class="content-date">January 2024</span></p>
            
            <div class="pdf-container">
                <iframe src="" width="100%" height="500px" 
                        title="Cabinet 2 Wiring Diagram"></iframe>
            </div>
            
            <div class="actions">
                <a href="" download class="download-link">Download PDF</a>
                <a href="" target="_blank" class="download-link">Open in New Tab</a>
            </div>
        </div>




    </main>
    
    <footer class="footer_content">
        <p>&copy; <span id="current-year"></span> ELOPAR Ltd. | Technical Documentation | <span>Version: 2.0.1</span></p>
        <p>Contact: <a href="mailto:plamendimitrov@elopar.com.tr">plamendimitrov@elopar.com.tr</a></p>
    </footer>

  

    <script>
        // Set current year
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // Set current dates for all content
        const today = new Date();
        const formattedDate = today.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // Update all date spans
        document.querySelectorAll('.content-date').forEach(span => {
            span.textContent = formattedDate;
        });
        
        // Main content management functions
        function showContent(contentId) {
            // Hide main list
            document.getElementById('main-list').style.display = 'none';
            
            // Hide all dynamic content first
            document.querySelectorAll('.dynamic-content').forEach(el => {
                el.classList.remove('active');
            });
            
            // Show selected content
            const contentElement = document.getElementById(contentId + '-content');
            if (contentElement) {
                contentElement.classList.add('active');
                
                // Scroll to the content
                setTimeout(() => {
                    contentElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
            
            // Update URL hash (for direct links)
            if (history.pushState) {
                history.pushState({ content: contentId }, '', '#' + contentId);
            } else {
                window.location.hash = '#' + contentId;
            }
            
            // Update page title
            updatePageTitle(contentId);
        }
        
        function hideContent() {
            // Show main list
            document.getElementById('main-list').style.display = 'block';
            
            // Hide all dynamic content
            document.querySelectorAll('.dynamic-content').forEach(el => {
                el.classList.remove('active');
            });
            
            // Update URL hash
            if (history.replaceState) {
                history.replaceState({ content: null }, '', window.location.pathname);
            }
            window.location.hash = '';
            
            // Restore page title
            document.title = 'Elopar BG Public - Wiring Diagrams';
            
            // Scroll to top of list
            setTimeout(() => {
                document.getElementById('main-list').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }
        
        function updatePageTitle(contentId) {
            const contentMap = {
                'cabinet0': 'Injection Molding Office Wiring Diagram',
                'cabinet1': 'Injection Molding Cabinet 1 Wiring Diagram',
                'cabinet2': 'Injection Molding Cabinet 2 Wiring Diagram'
            };
            
            if (contentMap[contentId]) {
                document.title = 'Elopar BG - ' + contentMap[contentId];
            }
        }
        
        // Check URL hash on page load
        function loadFromHash() {
            const hash = window.location.hash.substring(1); // Remove #
            const validHashes = ['cabinet0', 'cabinet1', 'cabinet2'];
            
            if (hash && validHashes.includes(hash)) {
                // Small delay to ensure DOM is ready
                setTimeout(() => {
                    showContent(hash);
                }, 100);
                return true;
            }
            return false;
        }
        
        // Handle hash changes
        function handleHashChange() {
            const hash = window.location.hash.substring(1);
            const validHashes = ['cabinet0', 'cabinet1', 'cabinet2'];
            
            if (hash && validHashes.includes(hash)) {
                showContent(hash);
            } else if (hash === '') {
                hideContent();
            }
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners to content links
            document.querySelectorAll('.content-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const contentId = this.getAttribute('data-content');
                    showContent(contentId);
                });
            });
            
            // Add event listeners to back buttons
            document.querySelectorAll('.back-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    hideContent();
                });
            });
            
            // Initial load from hash
            loadFromHash();
            
            // Listen for hash changes
            window.addEventListener('hashchange', handleHashChange);
            
            // Handle browser back/forward buttons
            window.addEventListener('popstate', function(event) {
                setTimeout(handleHashChange, 10);
            });
        });
        
        // Also try to load from hash on window load (as backup)
        window.addEventListener('load', function() {
            // If content not loaded yet but hash exists, try again
            if (window.location.hash && !document.querySelector('.dynamic-content.active')) {
                setTimeout(loadFromHash, 200);
            }
        });
        
        // Optional: Generate direct links for sharing
        function generateDirectLink(contentId) {
            return window.location.origin + window.location.pathname + '#' + contentId;
        }
        
        // Add direct links to each content section
        document.addEventListener('DOMContentLoaded', function() {
            const contentIds = ['cabinet0', 'cabinet1', 'cabinet2', 'cabinet3', 'cabinet4'];
            
            contentIds.forEach(id => {
                const contentDiv = document.getElementById(id + '-content');
                if (contentDiv) {
                    const shareDiv = document.createElement('div');
                    shareDiv.style.marginTop = '20px';
                    shareDiv.style.padding = '10px';
                    shareDiv.style.backgroundColor = '#e9ecef';
                    shareDiv.style.borderRadius = '4px';
                    shareDiv.innerHTML = `
                        <p style="margin: 0; font-size: 14px; color: #666;">
                            <strong>Direct link:</strong> 
                            <a href="${generateDirectLink(id)}" style="color: #007bff; word-break: break-all;">
                                ${generateDirectLink(id)}
                            </a>
                        </p>
                    `;
                    contentDiv.appendChild(shareDiv);
                }
            });
        });
    </script>
</body>
</html>